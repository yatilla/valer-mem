<!DOCTYPE html>
<html lang="tr">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, viewport-fit=cover">
<title>Valeron Mehmet</title>
<link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700;800&display=swap" rel="stylesheet">

<style>
*{box-sizing:border-box;margin:0;padding:0;-webkit-tap-highlight-color:transparent;}

:root{
--bg:#f2f2f7;
--card:#ffffff;
--border:#e5e5ea;
--text:#000;
--text2:#6c6c70;
--text3:#aeaeb2;
--accent:#007aff;
--green:#34c759;
--red:#ff3b30;
--orange:#ff9500;
--nav-h:83px;
--top-h:56px;
}

html,body{
height:100%;
overflow:hidden;
font-family:'Inter',-apple-system,system-ui,sans-serif;
background:var(--bg);
color:var(--text);
}

.shell{
display:flex;
flex-direction:column;
height:100vh;
max-width:480px;
margin:0 auto;
background:var(--bg);
}

/* TOP BAR */
.topbar{
height:var(--top-h);
background:#fff;
border-bottom:1px solid var(--border);
display:flex;
align-items:center;
justify-content:space-between;
padding:0 18px;
z-index:10;
}
.topbar-title{font-weight:700;font-size:16px;}
.topbar-sub{font-size:11px;color:var(--text2);}
.topbar-right{display:flex;align-items:center;gap:10px;}

.sync-dot{
width:8px;height:8px;border-radius:50%;
background:var(--text3);
}
.sync-dot.live{background:var(--green);}
.sync-dot.err{background:var(--red);}

.pill{
padding:6px 12px;
border-radius:20px;
font-size:12px;
font-weight:600;
cursor:pointer;
}
.pill-default{background:var(--bg);color:var(--text2);border:1px solid var(--border);}
.pill-ok{background:rgba(52,199,89,.15);color:var(--green);}
.pill-warn{background:rgba(255,149,0,.15);color:var(--orange);}
.pill-crit{background:rgba(255,59,48,.15);color:var(--red);}

/* CONTENT */
.content{flex:1;position:relative;}
.page{
position:absolute;
inset:0;
overflow-y:auto;
opacity:0;
pointer-events:none;
transition:.2s;
padding-bottom:100px;
}
.page.active{
opacity:1;
pointer-events:all;
}

/* CALENDAR */
.cal-month-row{
display:flex;
justify-content:space-between;
padding:14px 18px;
font-weight:700;
font-size:18px;
}
.cal-grid{
display:grid;
grid-template-columns:repeat(7,1fr);
gap:4px;
padding:0 10px 20px;
}
.dc{
aspect-ratio:1;
border-radius:10px;
background:#fff;
border:1px solid var(--border);
display:flex;
align-items:center;
justify-content:center;
font-weight:600;
cursor:pointer;
}
.dc.today{border:2px solid var(--accent);}
.dc.locked{border:2px solid var(--orange);}

/* MODAL OVERLAY */
.modal-overlay{
position:fixed;
inset:0;
background:rgba(0,0,0,.58);
backdrop-filter:blur(6px);
-webkit-backdrop-filter:blur(6px);
display:flex;
align-items:flex-end;
z-index:999;
opacity:0;
pointer-events:none;
transition:.25s;
}
.modal-overlay.open{
opacity:1;
pointer-events:all;
}

/* MODAL SHEET */
.modal-sheet{
width:100%;
max-width:480px;
margin:0 auto;
background:#ffffff;
border-radius:20px 20px 0 0;
box-shadow:0 -18px 50px rgba(0,0,0,.28);
border-top:1px solid rgba(0,0,0,.06);
padding:20px;
transform:translateY(100%);
transition:.3s cubic-bezier(.32,.72,0,1);
}
.modal-overlay.open .modal-sheet{
transform:translateY(0);
}

.modal-title{
font-size:18px;
font-weight:800;
margin-bottom:10px;
}

.modal-actions{
display:flex;
gap:10px;
margin-top:20px;
}

.btn{
flex:1;
padding:10px;
border-radius:12px;
font-weight:600;
border:none;
cursor:pointer;
}
.btn-primary{background:var(--accent);color:#fff;}
.btn-secondary{background:var(--bg);}

/* BOTTOM NAV */
.bottom-nav{
height:var(--nav-h);
background:#fff;
border-top:1px solid var(--border);
display:flex;
}
.bn-item{
flex:1;
display:flex;
flex-direction:column;
align-items:center;
justify-content:center;
font-size:11px;
cursor:pointer;
}
.bn-item.active{color:var(--accent);}
</style>
</head>
<body>

<div class="shell">

<div class="topbar">
<div>
<div class="topbar-title">⚔ Valeron Mehmet</div>
<div class="topbar-sub">Arkadaşlık Ligi</div>
</div>
<div class="topbar-right">
<div id="syncDot" class="sync-dot live"></div>
<div id="meterPill" class="pill pill-default" onclick="setLastMeeting()">Tarih gir</div>
</div>
</div>

<div class="content">
<div class="page active" id="pCalendar">
<div class="cal-month-row">
<div id="calMo"></div>
<div>
<button onclick="changeMonth(-1)">‹</button>
<button onclick="changeMonth(1)">›</button>
</div>
</div>
<div class="cal-grid" id="cGrid"></div>
</div>
</div>

<div class="bottom-nav">
<div class="bn-item active">Takvim</div>
<div class="bn-item">En İyi</div>
<div class="bn-item">Lig</div>
<div class="bn-item">İstatistik</div>
<div class="bn-item">Kilitli</div>
</div>

</div>

<!-- MODAL -->
<div class="modal-overlay" id="modalOverlay" onclick="if(event.target===this)closeModal()">
<div class="modal-sheet">
<div class="modal-title" id="modalTitle"></div>

<div class="modal-actions">
<button class="btn btn-secondary" onclick="closeModal()">Temizle</button>
<button class="btn btn-primary" onclick="closeModal()">Tamam</button>
</div>

</div>
</div>

<script>
let vDate=new Date();

function renderCalendar(){
const y=vDate.getFullYear();
const m=vDate.getMonth();
document.getElementById("calMo").innerText=vDate.toLocaleString("tr",{month:"long",year:"numeric"});
const grid=document.getElementById("cGrid");
grid.innerHTML="";
const days=new Date(y,m+1,0).getDate();
for(let d=1;d<=days;d++){
const cell=document.createElement("div");
cell.className="dc";
cell.innerText=d;
cell.onclick=()=>openModal(y,m,d);
grid.appendChild(cell);
}
}

function changeMonth(delta){
vDate=new Date(vDate.getFullYear(),vDate.getMonth()+delta,1);
renderCalendar();
}

function openModal(y,m,d){
document.getElementById("modalTitle").innerText=`${d}.${m+1}.${y}`;
document.getElementById("modalOverlay").classList.add("open");
}

function closeModal(){
document.getElementById("modalOverlay").classList.remove("open");
}

function parseISODateLocal(iso){
const [y,m,d]=iso.split('-').map(Number);
return new Date(y,m-1,d,12);
}

function setLastMeeting(){
const d=prompt("Son buluşma tarihi (YYYY-MM-DD):",new Date().toISOString().split('T')[0]);
if(!d)return;
const days=Math.floor((Date.now()-parseISODateLocal(d).getTime())/86400000);
const pill=document.getElementById("meterPill");
if(days>45)pill.className="pill pill-crit";
else if(days>30)pill.className="pill pill-warn";
else pill.className="pill pill-ok";
pill.innerText=days+"g";
}

renderCalendar();
</script>

</body>
</html>
